(function(t){function e(e){for(var r,o,a=e[0],i=e[1],l=e[2],b=0,h=[];b<a.length;b++)o=a[b],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&h.push(c[o][0]),c[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);u&&u(e);while(h.length)h.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},c={app:0},s=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],i=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=i;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1c8d":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c={id:"wrapper"},s={class:"navbar is-dark"},o={class:"navbar-brand"},a=Object(r["g"])("Keski Flowers"),i=Object(r["h"])("span",{"aria-hidden":"true"},null,-1),l=Object(r["h"])("span",{"aria-hidden":"true"},null,-1),u=Object(r["h"])("span",{"aria-hidden":"true"},null,-1),b=Object(r["h"])("div",{class:"navbar-start"},[Object(r["h"])("div",{class:"navbar-item"},[Object(r["h"])("form",{method:"get",action:"/search"},[Object(r["h"])("div",{class:"field has-addons"},[Object(r["h"])("div",{class:"control"},[Object(r["h"])("input",{type:"text",class:"input",placeholder:"what are you looking for?",name:"query"})]),Object(r["h"])("div",{class:"control"},[Object(r["h"])("button",{class:"button is-success"},[Object(r["h"])("span",{class:"icon"},[Object(r["h"])("i",{class:"fas fa-search"})])])])])])])],-1),h={class:"navbar-end"},d=Object(r["g"])("Love"),m=Object(r["g"])("Compassion"),O={class:"navbar-item"},j={class:"buttons"},f=Object(r["g"])("My Account"),p=Object(r["g"])("Log In"),g=Object(r["h"])("span",{class:"icon"},[Object(r["h"])("i",{class:"fas fa-shopping-cart"})],-1),v=Object(r["h"])("div",{class:"lds-dual-ring"},null,-1),w={class:"section"},y=Object(r["f"])('<footer class="footer"><p class="has-text-centered"><b> Keski Flowers Limited</b></p><p class="has-text-centered"><b>Contact Us: +254783293180 and +254722161840</b></p><br><p class="has-text-centered"><a target="_blank" title="Follow us on Facebook" href="https://www.facebook.com/keskilimited"><img alt="Follow us on Facebook" src="https://c866088.ssl.cf3.rackcdn.com/assets/facebook40x40.png" border="0"></a></p><p class="has-text-centered"><a target="_blank" title="Follow us on YouTube" href="https://www.youtube.com/channel/UCyBtUuCQfPylixne7yhFqeA"><img alt="Follow us on YouTube" src="https://c866088.ssl.cf3.rackcdn.com/assets/youtube40x40.png" border="0"></a></p><br><p class="has-text-centered"> KeskiFlowers <i class="fas fa-copyright"></i><b>2021. All Rights Reserved.</b></p><br></footer>',1);function k(t,e,n,k,q,x){var _=Object(r["x"])("Strong"),F=Object(r["x"])("router-link"),S=Object(r["x"])("router-view");return Object(r["q"])(),Object(r["d"])("div",c,[Object(r["h"])("nav",s,[Object(r["h"])("div",o,[Object(r["h"])(F,{to:"/",class:"navbar-item"},{default:Object(r["D"])((function(){return[Object(r["h"])(_,null,{default:Object(r["D"])((function(){return[a]})),_:1})]})),_:1}),Object(r["h"])("a",{class:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbar-menu",onClick:e[1]||(e[1]=function(t){return q.showMobileMenu=!q.showMobileMenu})},[i,l,u])]),Object(r["h"])("div",{class:["navbar-menu",{"is-active":q.showMobileMenu}],id:"navbar-menu"},[b,Object(r["h"])("div",h,[Object(r["h"])(F,{to:"/love",class:"navbar-item"},{default:Object(r["D"])((function(){return[d]})),_:1}),Object(r["h"])(F,{to:"/compassion",class:"navbar-item"},{default:Object(r["D"])((function(){return[m]})),_:1}),Object(r["h"])("div",O,[Object(r["h"])("div",j,[t.$store.state.isAuthenticated?(Object(r["q"])(),Object(r["d"])(F,{key:0,to:"/my-account",class:"button is-light"},{default:Object(r["D"])((function(){return[f]})),_:1})):(Object(r["q"])(),Object(r["d"])(F,{key:1,to:"/log-in",class:"button is-light"},{default:Object(r["D"])((function(){return[p]})),_:1})),Object(r["h"])(F,{to:"/cart",class:"button is-success"},{default:Object(r["D"])((function(){return[g,Object(r["h"])("span",null,"Cart ("+Object(r["z"])(x.cartTotalLength)+")",1)]})),_:1})])])])],2)]),Object(r["h"])("div",{class:["is-loading-bar has-text-centered",{"is-loading":t.$store.state.isLoading}]},[v],2),Object(r["h"])("section",w,[Object(r["h"])(S)]),y])}var q=n("bc3a"),x=n.n(q),_={data:function(){return{showMobileMenu:!1,cart:{items:[]}}},beforeCreate:function(){this.$store.commit("initializeStore");var t=this.$store.state.token;x.a.defaults.headers.common["Authorization"]=t?"Token"+t:""},mounted:function(){this.cart=this.$store.state.cart},computed:{cartTotalLength:function(){for(var t=0,e=0;e<this.cart.items.length;e++)t+=this.cart.items[e].quantity;return t}}};n("a35a");_.render=k;var F=_,S=n("6c02"),I=(n("4de4"),n("5502")),C=Object(I["a"])({state:{cart:{items:[]},isAuthenticated:!1,token:"",isLoading:!1},mutations:{initializeStore:function(t){localStorage.getItem("cart")?t.cart=JSON.parse(localStorage.getItem("cart")):localStorage.setItem("cart",JSON.stringify(t.cart)),localStorage.getItem("token")?(t.token=localStorage.getItem("token"),t.isAuthenticated=!0):(t.token="",t.isAuthenticated=!1)},addToCart:function(t,e){var n=t.cart.items.filter((function(t){return t.flower.flower_id==e.flower.flower_id}));n.length?n[0].quantity=parseInt(n[0].quantity)+parseInt(e.quantity):t.cart.items.push(e),localStorage.setItem("cart",JSON.stringify(t.cart))},setIsLoading:function(t,e){t.isLoading=e},setToken:function(t,e){t.token=e,t.isAuthenticated=!0},removeToken:function(t,e){t.token="",t.isAuthenticated=!1},clearCart:function(t){t.cart={items:[]},localStorage.setItem("cart",JSON.stringify(t.cart))}},actions:{},modules:{}}),z={class:"home"},L=Object(r["h"])("section",{class:"hero is-medium is-dark mb-6"},[Object(r["h"])("div",{class:"hero-body has-text-centered"},[Object(r["h"])("p",{class:"title mb-6"}," Welcome to Keski Flowers "),Object(r["h"])("p",{class:"subtitle"}," create the emotions, feel the blossom ")])],-1),T={class:"columns is-multiline"},P=Object(r["h"])("div",{class:"column is-12"},[Object(r["h"])("h2",{class:"is-size-2 has-text-centered"},"Latest Flowers")],-1);function $(t,e,n,c,s,o){var a=Object(r["x"])("FlowerBox");return Object(r["q"])(),Object(r["d"])("div",z,[L,Object(r["h"])("div",T,[P,(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(s.latestFlowers,(function(t){return Object(r["q"])(),Object(r["d"])(a,{key:t.flower_id,flower:t},null,8,["flower"])})),128))])])}var U=n("1da1"),A=(n("96cf"),Object(r["G"])("data-v-ac15bb24"));Object(r["t"])("data-v-ac15bb24");var K={class:"column is-3"},R={class:"box"},B={class:"image mb-4"},M={class:"is-size-4"},E={class:"is-size-6 has-text-grey"},V=Object(r["g"])("View Details");Object(r["r"])();var D=A((function(t,e,n,c,s,o){var a=Object(r["x"])("router-link");return Object(r["q"])(),Object(r["d"])("div",K,[Object(r["h"])("div",R,[Object(r["h"])("figure",B,[Object(r["h"])("img",{src:n.flower.get_thumbnail},null,8,["src"])]),Object(r["h"])("h3",M,Object(r["z"])(n.flower.flower_name),1),Object(r["h"])("p",E,"Ksh"+Object(r["z"])(n.flower.flower_price),1),Object(r["h"])(a,{to:n.flower.get_absolute_url,class:"button is-dark mt-4"},{default:A((function(){return[V]})),_:1},8,["to"])])])})),J={name:"FlowerBox",props:{flower:Object}};n("c7a3");J.render=D,J.__scopeId="data-v-ac15bb24";var N=J,Q={name:"Home",data:function(){return{latestFlowers:[]}},components:{FlowerBox:N},mounted:function(){this.getLatestFlowers(),document.title="Home | KeskiFlowers"},methods:{getLatestFlowers:function(){var t=this;return Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("setIsLoading",!0),e.next=3,x.a.get("/api/v1/latest-flowers/").then((function(e){t.latestFlowers=e.data})).catch((function(t){console.log(t)}));case 3:t.$store.commit("setIsLoading",!1);case 4:case"end":return e.stop()}}),e)})))()}}};Q.render=$;var H=Q,Z={class:"page-flower"},Y={class:"columns is-multiline"},W={class:"column is-9"},X={class:"image mb-6"},G={class:"title"},tt={class:"column is-3"},et=Object(r["h"])("h2",{class:"subtitle"},"Information",-1),nt=Object(r["h"])("strong",null,"Price: ",-1),rt={class:"field has-addons mt-6"},ct={class:"control"},st={class:"control"};function ot(t,e,n,c,s,o){return Object(r["q"])(),Object(r["d"])("div",Z,[Object(r["h"])("div",Y,[Object(r["h"])("div",W,[Object(r["h"])("figure",X,[Object(r["h"])("img",{src:s.flower.get_image},null,8,["src"])]),Object(r["h"])("h1",G,Object(r["z"])(s.flower.flower_name),1),Object(r["h"])("p",null,Object(r["z"])(s.flower.flower_description),1)]),Object(r["h"])("div",tt,[et,Object(r["h"])("p",null,[nt,Object(r["g"])("Ksh"+Object(r["z"])(s.flower.flower_price),1)]),Object(r["h"])("div",rt,[Object(r["h"])("div",ct,[Object(r["E"])(Object(r["h"])("input",{type:"number",class:"input",min:"1","onUpdate:modelValue":e[1]||(e[1]=function(t){return s.quantity=t})},null,512),[[r["B"],s.quantity]])]),Object(r["h"])("div",st,[Object(r["h"])("a",{class:"button is-dark",onClick:e[2]||(e[2]=function(){return o.addToCart&&o.addToCart.apply(o,arguments)})},"Add to cart")])])])])])}n("99af");var at=n("4b44"),it={name:"Flower",data:function(){return{flower:{},quantity:1}},mounted:function(){this.getFlower()},methods:{getFlower:function(){var t=this;return Object(U["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("setIsLoading",!0),n=t.$route.params.category_slug,r=t.$route.params.flower_slug,e.next=5,x.a.get("/api/v1/flowers/".concat(n,"/").concat(r)).then((function(e){t.flower=e.data,document.title=t.flower.flower_name+" | KeskiFlowers"})).catch((function(t){console.log(t)}));case 5:t.$store.commit("setIsLoading",!1);case 6:case"end":return e.stop()}}),e)})))()},addToCart:function(){(isNaN(this.quantity)||this.quantity<1)&&(this.quantity=1);var t={flower:this.flower,quantity:this.quantity};this.$store.commit("addToCart",t),Object(at["toast"])({message:"The product has been added to the cart",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"})}}};it.render=ot;var lt=it,ut=(n("b0c0"),{class:"page-category"}),bt={class:"columns is-multiline"},ht={class:"column is-12"},dt={class:"is-size-2 has-text-centered"};function mt(t,e,n,c,s,o){var a=Object(r["x"])("FlowerBox");return Object(r["q"])(),Object(r["d"])("div",ut,[Object(r["h"])("div",bt,[Object(r["h"])("div",ht,[Object(r["h"])("h1",dt,Object(r["z"])(s.category.name),1)]),(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(s.category.flowers,(function(t){return Object(r["q"])(),Object(r["d"])(a,{key:t.flower_id,flower:t},null,8,["flower"])})),128))])])}var Ot={name:"Category",components:{FlowerBox:N},data:function(){return{category:{flowers:[]}}},mounted:function(){this.getCategory()},watch:{$route:function(t,e){"Category"===t.name&&this.getCategory()}},methods:{getCategory:function(){var t=this;return Object(U["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.$route.params.category_slug,t.$store.commit("setIsLoading",!0),x.a.get("api/v1/flowers/".concat(n,"/")).then((function(e){t.category=e.data,document.title=t.category.name+" |KeskiFlowers"})).catch((function(t){console.log(t),Object(at["toast"])({message:"Something went wrong. Please try again",type:"is-danger",dismissible:!0,pauseOnHover:!0,duration:2e3,position:bottom-right})})),t.$store.commit("setIsLoading",!1);case 4:case"end":return e.stop()}}),e)})))()}}};Ot.render=mt;var jt=Ot,ft={class:"page-search"},pt={class:"columns is-multiline"},gt={class:"column is-12"},vt=Object(r["h"])("h1",{class:"title"},"Search",-1),wt={class:"is-size-5 has-text-grey"};function yt(t,e,n,c,s,o){var a=Object(r["x"])("FlowerBox");return Object(r["q"])(),Object(r["d"])("div",ft,[Object(r["h"])("div",pt,[Object(r["h"])("div",gt,[vt,Object(r["h"])("h2",wt,'Search term: "'+Object(r["z"])(s.query)+'"',1)]),(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(s.flowers,(function(t){return Object(r["q"])(),Object(r["d"])(a,{key:t.flower_id,flower:t},null,8,["flower"])})),128))])])}n("ac1f"),n("841c"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d");var kt={name:"Search",components:{FlowerBox:N},data:function(){return{flowers:[],query:""}},mounted:function(){document.title="Search | KeskiFlowers";var t=window.location.search.substring(1),e=new URLSearchParams(t);e.get("query")&&(this.query=e.get("query"),this.performSearch())},methods:{performSearch:function(){var t=this;return Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("setIsLoading",!0),e.next=3,x.a.post("/api/v1/flowers/search/",{query:t.query}).then((function(e){t.flowers=e.data})).catch((function(t){console.log(t)}));case 3:t.$store.commit("setIsLoading",!1);case 4:case"end":return e.stop()}}),e)})))()}}};kt.render=yt;var qt=kt,xt=(n("b680"),{class:"page-cart"}),_t={class:"columns is-multiline"},Ft=Object(r["h"])("div",{class:"column is-12"},[Object(r["h"])("h1",{class:"title"},"Cart")],-1),St={class:"column is-12 box"},It={key:0,class:"table is-fullwidth"},Ct=Object(r["h"])("thead",null,[Object(r["h"])("tr",null,[Object(r["h"])("th",null,"Flower"),Object(r["h"])("th",null,"Price"),Object(r["h"])("th",null,"Quantity"),Object(r["h"])("th",null,"Total"),Object(r["h"])("th")])],-1),zt={key:1},Lt={class:"column is-12 box"},Tt=Object(r["h"])("h2",{class:"subtitle"},"Summary",-1),Pt=Object(r["h"])("hr",null,null,-1),$t=Object(r["g"])("Proceed to checkout");function Ut(t,e,n,c,s,o){var a=Object(r["x"])("CartItem"),i=Object(r["x"])("router-link");return Object(r["q"])(),Object(r["d"])("div",xt,[Object(r["h"])("div",_t,[Ft,Object(r["h"])("div",St,[o.cartTotalLength?(Object(r["q"])(),Object(r["d"])("table",It,[Ct,Object(r["h"])("tbody",null,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(s.cart.items,(function(t){return Object(r["q"])(),Object(r["d"])(a,{key:t.flower.flower_id,initialItem:t,onRemoveFromCart:o.removeFromCart},null,8,["initialItem","onRemoveFromCart"])})),128))])])):(Object(r["q"])(),Object(r["d"])("p",zt,"You don't have any flowers in your cart..."))]),Object(r["h"])("div",Lt,[Tt,Object(r["h"])("strong",null,"Ksh "+Object(r["z"])(o.cartTotalPrice.toFixed(2)),1),Object(r["g"])(", "+Object(r["z"])(o.cartTotalLength)+" items ",1),Pt,Object(r["h"])(i,{to:"/cart/checkout",class:"button is-dark"},{default:Object(r["D"])((function(){return[$t]})),_:1})])])])}function At(t,e,n,c,s,o){var a=Object(r["x"])("router-link");return Object(r["q"])(),Object(r["d"])("tr",null,[Object(r["h"])("td",null,[Object(r["h"])(a,{to:"item.flower.get_absolute_url"},{default:Object(r["D"])((function(){return[Object(r["g"])(Object(r["z"])(s.item.flower.flower_name),1)]})),_:1})]),Object(r["h"])("td",null," Ksh"+Object(r["z"])(s.item.flower.flower_price),1),Object(r["h"])("td",null,[Object(r["g"])(Object(r["z"])(s.item.quantity)+" ",1),Object(r["h"])("a",{onClick:e[1]||(e[1]=function(t){return o.decrementQuantity(s.item)})},"-"),Object(r["h"])("a",{onClick:e[2]||(e[2]=function(t){return o.incrementQuantity(s.item)})},"+")]),Object(r["h"])("td",null," Ksh"+Object(r["z"])(o.getItemTotal(s.item).toFixed(2)),1),Object(r["h"])("td",null,[Object(r["h"])("button",{class:"delete",onClick:e[3]||(e[3]=function(t){return o.removeFromCart(s.item)})})])])}var Kt={name:"CartItem",props:{initialItem:Object},data:function(){return{item:this.initialItem}},methods:{getItemTotal:function(t){return t.quantity*t.flower.flower_price},decrementQuantity:function(t){t.quantity-=1,0===t.quantity&&this.$emit("removeFromCart",t),this.updateCart()},incrementQuantity:function(t){t.quantity+=1,this.updateCart()},updateCart:function(){localStorage.setItem("cart",JSON.stringify(this.$store.state.cart))},removeFromCart:function(t){this.$emit("removeFromCart",t),this.updateCart()}}};Kt.render=At;var Rt=Kt,Bt={name:"Cart",components:{CartItem:Rt},data:function(){return{cart:{items:[]}}},mounted:function(){this.cart=this.$store.state.cart},methods:{removeFromCart:function(t){this.cart.items=this.cart.items.filter((function(e){return e.flower.flower_id!==t.flower.flower_id}))}},computed:{cartTotalLength:function(){return this.cart.items.reduce((function(t,e){return t+e.quantity}),0)},cartTotalPrice:function(){return this.cart.items.reduce((function(t,e){return t+e.flower.flower_price*e.quantity}),0)}}};Bt.render=Ut;var Mt=Bt,Et={class:"page-sign-up"},Vt={class:"column is-4 is-offset-4"},Dt=Object(r["h"])("h1",{class:"title"},"Sign Up",-1),Jt={class:"field"},Nt=Object(r["h"])("label",null,"Username",-1),Qt={class:"control"},Ht={class:"field"},Zt=Object(r["h"])("label",null,"Password",-1),Yt={class:"control"},Wt={class:"field"},Xt=Object(r["h"])("label",null,"Confirm Password",-1),Gt={class:"control"},te={key:0,class:"notification is-danger"},ee=Object(r["h"])("div",{class:"field"},[Object(r["h"])("div",{class:"control"},[Object(r["h"])("button",{class:"button is-dark"},"Sign Up")])],-1),ne=Object(r["h"])("hr",null,null,-1),re=Object(r["g"])(" or "),ce=Object(r["g"])("Click here"),se=Object(r["g"])(" to log in! ");function oe(t,e,n,c,s,o){var a=Object(r["x"])("router-link");return Object(r["q"])(),Object(r["d"])("div",Et,[Object(r["h"])("div",Vt,[Dt,Object(r["h"])("form",{onSubmit:e[4]||(e[4]=Object(r["F"])((function(){return o.submitForm&&o.submitForm.apply(o,arguments)}),["prevent"]))},[Object(r["h"])("div",Jt,[Nt,Object(r["h"])("div",Qt,[Object(r["E"])(Object(r["h"])("input",{type:"text",class:"input","onUpdate:modelValue":e[1]||(e[1]=function(t){return s.username=t})},null,512),[[r["B"],s.username]])])]),Object(r["h"])("div",Ht,[Zt,Object(r["h"])("div",Yt,[Object(r["E"])(Object(r["h"])("input",{type:"password",class:"input","onUpdate:modelValue":e[2]||(e[2]=function(t){return s.password=t})},null,512),[[r["B"],s.password]])])]),Object(r["h"])("div",Wt,[Xt,Object(r["h"])("div",Gt,[Object(r["E"])(Object(r["h"])("input",{type:"password",class:"input","onUpdate:modelValue":e[3]||(e[3]=function(t){return s.password2=t})},null,512),[[r["B"],s.password2]])])]),s.errors.length?(Object(r["q"])(),Object(r["d"])("div",te,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(s.errors,(function(t){return Object(r["q"])(),Object(r["d"])("p",{key:t},Object(r["z"])(t),1)})),128))])):Object(r["e"])("",!0),ee,ne,re,Object(r["h"])(a,{to:"/log-in"},{default:Object(r["D"])((function(){return[ce]})),_:1}),se],32)])])}var ae={name:"SignUp",data:function(){return{username:"",password:"",password2:"",errors:[]}},mounted:function(){document.title="SignUp | KeskiFlowers"},methods:{submitForm:function(){var t=this;if(this.errors=[],""===this.username&&this.errors.push("Please provide a username"),""===this.password&&this.errors.push("Please provide a password"),this.password!==this.password2&&this.errors.push("The passwords do not match"),!this.errors.length){var e={username:this.username,password:this.password};x.a.post("/api/v1/users/",e).then((function(e){Object(at["toast"])({message:"Account created successfully. Please log in to your account",type:"is-success",dismissible:!0,pauseOnHover:!0,duration:2e3,position:"bottom-right"}),t.$router.push("/log-in")})).catch((function(e){if(e.response){for(var n in e.response.data)t.errors.push("".concat(n,": ").concat(e.response.data[n]));console.log(JSON.stringify(e.response.data))}else e.message&&(t.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(e)))}))}}}};ae.render=oe;var ie=ae,le={class:"page-log-in"},ue={class:"column is-4 is-offset-4"},be=Object(r["h"])("h1",{class:"title"},"Log In",-1),he={class:"field"},de=Object(r["h"])("label",null,"Username",-1),me={class:"control"},Oe={class:"field"},je=Object(r["h"])("label",null,"Password",-1),fe={class:"control"},pe={key:0,class:"notification is-danger"},ge=Object(r["h"])("div",{class:"field"},[Object(r["h"])("div",{class:"control"},[Object(r["h"])("button",{class:"button is-dark"},"Log In")])],-1),ve=Object(r["h"])("hr",null,null,-1),we=Object(r["g"])(" or "),ye=Object(r["g"])("Click here"),ke=Object(r["g"])(" to Sign Up! ");function qe(t,e,n,c,s,o){var a=Object(r["x"])("router-link");return Object(r["q"])(),Object(r["d"])("div",le,[Object(r["h"])("div",ue,[be,Object(r["h"])("form",{onSubmit:e[3]||(e[3]=Object(r["F"])((function(){return o.submitForm&&o.submitForm.apply(o,arguments)}),["prevent"]))},[Object(r["h"])("div",he,[de,Object(r["h"])("div",me,[Object(r["E"])(Object(r["h"])("input",{type:"text",class:"input","onUpdate:modelValue":e[1]||(e[1]=function(t){return s.username=t})},null,512),[[r["B"],s.username]])])]),Object(r["h"])("div",Oe,[je,Object(r["h"])("div",fe,[Object(r["E"])(Object(r["h"])("input",{type:"password",class:"input","onUpdate:modelValue":e[2]||(e[2]=function(t){return s.password=t})},null,512),[[r["B"],s.password]])])]),s.errors.length?(Object(r["q"])(),Object(r["d"])("div",pe,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(s.errors,(function(t){return Object(r["q"])(),Object(r["d"])("p",{key:t},Object(r["z"])(t),1)})),128))])):Object(r["e"])("",!0),ge,ve,we,Object(r["h"])(a,{to:"/sign-up"},{default:Object(r["D"])((function(){return[ye]})),_:1}),ke],32)])])}var xe={name:"LogIn",data:function(){return{username:"",password:"",errors:[]}},mounted:function(){document.title="LogIn | KeskiFlowers"},methods:{submitForm:function(){var t=this;return Object(U["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return x.a.defaults.headers.common["Authorization"]="",localStorage.removeItem("token"),n={username:t.username,password:t.password},e.next=5,x.a.post("/api/v1/token/login/",n).then((function(e){var n=e.data.auth_token;t.$store.commit("setToken",n),x.a.defaults.headers.common["Authorization"]="Token"+n,localStorage.setItem("token",n);var r=t.$route.query.to||"/cart";t.$router.push(r)})).catch((function(e){if(e.response)for(var n in e.response.data)t.errors.push("".concat(n,": ").concat(e.response.data[n]));else t.errors.push("Something went wrong. Please try again"),console.log(JSON.stringify(e))}));case 5:case"end":return e.stop()}}),e)})))()}}};xe.render=qe;var _e=xe,Fe={class:"page-my-account"},Se={class:"columns is-multiline"},Ie=Object(r["h"])("div",{class:"column is-12"},[Object(r["h"])("h1",{class:"title"},"My Account")],-1),Ce={class:"column is-12"},ze=Object(r["h"])("hr",null,null,-1),Le={class:"column is-12"},Te=Object(r["h"])("h2",{class:"subtitle"},"My Orders",-1);function Pe(t,e,n,c,s,o){var a=Object(r["x"])("OrderSummary");return Object(r["q"])(),Object(r["d"])("div",Fe,[Object(r["h"])("div",Se,[Ie,Object(r["h"])("div",Ce,[Object(r["h"])("button",{onClick:e[1]||(e[1]=function(t){return o.logOut()}),class:"button is-danger"},"Log Out")]),ze,Object(r["h"])("div",Le,[Te,(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(s.orders,(function(t){return Object(r["q"])(),Object(r["d"])(a,{key:t.id,order:t},null,8,["order"])})),128))])])])}var $e={class:"box mb-4"},Ue={class:"is-size-4 mb-6"},Ae=Object(r["h"])("h4",{class:"is-size-5"},"Flowers",-1),Ke={class:"table is-fullwidth"},Re=Object(r["h"])("thead",null,[Object(r["h"])("tr",null,[Object(r["h"])("th",null,"Flower"),Object(r["h"])("th",null,"Price"),Object(r["h"])("th",null,"Quantity"),Object(r["h"])("th",null,"Total")])],-1);function Be(t,e,n,c,s,o){return Object(r["q"])(),Object(r["d"])("div",$e,[Object(r["h"])("h3",Ue,"Order #"+Object(r["z"])(n.order.id),1),Ae,Object(r["h"])("table",Ke,[Re,Object(r["h"])("tbody",null,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(n.order.items,(function(t){return Object(r["q"])(),Object(r["d"])("tr",{key:t.flower.flower_id},[Object(r["h"])("td",null,Object(r["z"])(t.flower.flower_name),1),Object(r["h"])("td",null,Object(r["z"])(t.flower.flower_price),1),Object(r["h"])("td",null,Object(r["z"])(t.quantity),1),Object(r["h"])("td",null,"Ksh"+Object(r["z"])(o.getItemTotal(t).toFixed(2)),1)])})),128))])])])}var Me={name:"OrderSummary",props:{order:Object},data:function(){return{}},methods:{getItemTotal:function(t){return t.quantity*t.flower.flower_price},orderTotalLength:function(t){return t.items.reduce((function(t,e){return t+e.quantity}),0)}}};Me.render=Be;var Ee=Me,Ve={name:"MyAccount",data:function(){return{orders:[]}},components:{OrderSummary:Ee},mounted:function(){document.title="My Account | KeskiFlowers",this.getMyOrders()},methods:{logOut:function(){x.a.defaults.headers.common["Authorization"]="",localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("password"),this.$store.commit("removeToken"),this.$router.push("/")},getMyOrder:function(){var t=this;return Object(U["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.commit("setIsLoading",!0),e.next=3,x.a.get("/api/v1/orders/").then((function(e){t.orders=e.data})).catch((function(t){console.log(t)}));case 3:t.$store.commit("setIsLoading",!1);case 4:case"end":return e.stop()}}),e)})))()}}};Ve.render=Pe;var De=Ve,Je={class:"page-checkout"},Ne={class:"columns is-multiline"},Qe=Object(r["h"])("div",{class:"column is-12"},[Object(r["h"])("h1",{class:"title"},"Checkout")],-1),He={class:"column is-12-box"},Ze={class:"table is-fullwidth"},Ye=Object(r["h"])("thead",null,[Object(r["h"])("tr",null,[Object(r["h"])("th",null,"Flower"),Object(r["h"])("th",null,"Price"),Object(r["h"])("th",null,"Quantity"),Object(r["h"])("th",null,"Total")])],-1),We=Object(r["h"])("td",{colspan:"2"},"Total",-1),Xe={class:"column is-12 box"},Ge=Object(r["h"])("h2",{class:"subtitle"},"Shipping details",-1),tn=Object(r["h"])("p",{class:"has-text-grey mb-4"},"* All fields are required",-1),en={class:"columns is-multiline"},nn={class:"column is-6"},rn={class:"field"},cn=Object(r["h"])("label",null,"First name *",-1),sn={class:"control"},on={class:"field"},an=Object(r["h"])("label",null,"Last name *",-1),ln={class:"control"},un={class:"field"},bn=Object(r["h"])("label",null,"E-mail *",-1),hn={class:"control"},dn={class:"field"},mn=Object(r["h"])("label",null,"Phone *",-1),On={class:"control"},jn={class:"column is-6"},fn={class:"field"},pn=Object(r["h"])("label",null,"Address *",-1),gn={class:"control"},vn={class:"field"},wn=Object(r["h"])("label",null,"Zipcode *",-1),yn={class:"control"},kn={class:"field"},qn=Object(r["h"])("label",null,"Place *",-1),xn={class:"control"},_n={key:0,class:"notification is-danger mt-4"},Fn=Object(r["h"])("hr",null,null,-1),Sn=Object(r["h"])("div",{id:"card-element",class:"mb-5"},null,-1),In=Object(r["h"])("hr",null,null,-1),Cn={class:"control"};function zn(t,e,n,c,s,o){return Object(r["q"])(),Object(r["d"])("div",Je,[Object(r["h"])("div",Ne,[Qe,Object(r["h"])("div",He,[Object(r["h"])("table",Ze,[Ye,Object(r["h"])("tbody",null,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(s.cart.items,(function(t){return Object(r["q"])(),Object(r["d"])("tr",{key:t.flower.flower_id},[Object(r["h"])("td",null,Object(r["z"])(t.flower.flower_name),1),Object(r["h"])("td",null,"Ksh"+Object(r["z"])(t.flower.flower_price),1),Object(r["h"])("td",null,Object(r["z"])(t.quantity),1),Object(r["h"])("td",null,"Ksh"+Object(r["z"])(o.getItemTotal(t).toFixed(2)),1)])})),128))]),Object(r["h"])("tfoot",null,[Object(r["h"])("tr",null,[We,Object(r["h"])("td",null,Object(r["z"])(o.cartTotalLength),1),Object(r["h"])("td",null,"Ksh"+Object(r["z"])(o.cartTotalPrice.toFixed(2)),1)])])])]),Object(r["h"])("div",Xe,[Ge,tn,Object(r["h"])("div",en,[Object(r["h"])("div",nn,[Object(r["h"])("div",rn,[cn,Object(r["h"])("div",sn,[Object(r["E"])(Object(r["h"])("input",{type:"text",class:"input","onUpdate:modelValue":e[1]||(e[1]=function(t){return s.first_name=t})},null,512),[[r["B"],s.first_name]])])]),Object(r["h"])("div",on,[an,Object(r["h"])("div",ln,[Object(r["E"])(Object(r["h"])("input",{type:"text",class:"input","onUpdate:modelValue":e[2]||(e[2]=function(t){return s.last_name=t})},null,512),[[r["B"],s.last_name]])])]),Object(r["h"])("div",un,[bn,Object(r["h"])("div",hn,[Object(r["E"])(Object(r["h"])("input",{type:"email",class:"input","onUpdate:modelValue":e[3]||(e[3]=function(t){return s.email=t})},null,512),[[r["B"],s.email]])])]),Object(r["h"])("div",dn,[mn,Object(r["h"])("div",On,[Object(r["E"])(Object(r["h"])("input",{type:"text",class:"input","onUpdate:modelValue":e[4]||(e[4]=function(t){return s.phone=t})},null,512),[[r["B"],s.phone]])])])]),Object(r["h"])("div",jn,[Object(r["h"])("div",fn,[pn,Object(r["h"])("div",gn,[Object(r["E"])(Object(r["h"])("input",{type:"text",class:"input","onUpdate:modelValue":e[5]||(e[5]=function(t){return s.address=t})},null,512),[[r["B"],s.address]])])]),Object(r["h"])("div",vn,[wn,Object(r["h"])("div",yn,[Object(r["E"])(Object(r["h"])("input",{type:"text",class:"input","onUpdate:modelValue":e[6]||(e[6]=function(t){return s.zipcode=t})},null,512),[[r["B"],s.zipcode]])])]),Object(r["h"])("div",kn,[qn,Object(r["h"])("div",xn,[Object(r["E"])(Object(r["h"])("input",{type:"text",class:"input","onUpdate:modelValue":e[7]||(e[7]=function(t){return s.place=t})},null,512),[[r["B"],s.place]])])])])]),s.errors.length?(Object(r["q"])(),Object(r["d"])("div",_n,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(s.errors,(function(t){return Object(r["q"])(),Object(r["d"])("p",{key:t},Object(r["z"])(t),1)})),128))])):Object(r["e"])("",!0),Fn,Sn,o.cartTotalLength?(Object(r["q"])(),Object(r["d"])(r["a"],{key:1},[In,Object(r["h"])("div",Cn,[Object(r["h"])("a",{class:"button is-dark",onClick:e[8]||(e[8]=function(){return o.submitForm&&o.submitForm.apply(o,arguments)})},"Pay with Stripe")])],64)):Object(r["e"])("",!0)])])])}var Ln={name:"Checkout",data:function(){return{cart:{items:[]},stripe:{},card:{},first_name:"",last_name:"",email:"",phone:"",address:"",zipcode:"",place:"",errors:[]}},mounted:function(){if(document.title="Checkout | KeskiFlowers",this.cart=this.$store.state.cart,this.cartTotalLength>0){this.stripe=Stripe("pk_test_51JIWA5ECVEZ6NKHcwlArxxUhtRbH3sXxjdQnCpIRz5f3dfpwUV4INllbZKIeFhUZKlw4S9AIQwg2aZQx9PdEF4EZ00pYx6FSXJ");var t=this.stripe.elements();this.card=t.create("card",{hidePostalCode:!0}),this.card.mount("#card-element")}},methods:{getItemTotal:function(t){return t.quantity*t.flower.flower_price},submitForm:function(){var t=this;this.errors=[],""===this.first_name&&this.errors.push("Please enter your first name"),""===this.last_name&&this.errors.push("Please enter your last name"),""===this.email&&this.errors.push("Please enter your email address"),""===this.phone&&this.errors.push("Please enter your phone number"),""===this.address&&this.errors.push("Please enter your address"),""===this.zipcode&&this.errors.push("Please enter your zipcode"),""===this.place&&this.errors.push("Please enter your physical location"),this.errors.length||(this.$store.commit("setIsLoading",!0),this.stripe.createToken(this.card).then((function(e){e.error?(t.$store.commit("setIsLoading",!1),t.errors.push("Something went wrong with stripe. Please try again"),console.log(e.error.message)):t.stripeTokenHandler(e.token)})))},stripeTokenHandler:function(t){var e=this;return Object(U["a"])(regeneratorRuntime.mark((function n(){var r,c,s,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(r=[],c=0;c<e.cart.items.length;c++)s=e.cart.items[c],o={flower:s.flower.flower_id,quantity:s.quantity,price:s.flower.flower_price*s.quantity},r.push(o);return a={first_name:e.first_name,last_name:e.last_name,email:e.email,address:e.address,zipcode:e.zipcode,place:e.place,phone:e.phone,items:r,stripe_token:t.id},n.next=5,x.a.post("/api/v1/checkout/",a).then((function(t){e.$store.commit("clearCart"),e.$router.push("/cart/success")})).catch((function(t){e.errors.push("Something went wrong. Please try again"),console.log(t)}));case 5:e.$store.commit("setIsLoading",!1);case 6:case"end":return n.stop()}}),n)})))()}},computed:{cartTotalPrice:function(){return this.cart.items.reduce((function(t,e){return t+e.flower.flower_price*e.quantity}),0)},cartTotalLength:function(){return this.cart.items.reduce((function(t,e){return t+e.quantity}),0)}}};Ln.render=zn;var Tn=Ln,Pn={class:"page-success"},$n=Object(r["h"])("div",{class:"columns is-multiline"},[Object(r["h"])("div",{class:"column is-12"},[Object(r["h"])("h1",{class:"title"},"Thank you"),Object(r["h"])("p",null,"Your order has been processed and will be delivered to you as soon as possible")])],-1);function Un(t,e,n,c,s,o){return Object(r["q"])(),Object(r["d"])("div",Pn,[$n])}var An={name:"Success",data:function(){return{}},mounted:function(){document.title="Success | KeskiFlowers"}};An.render=Un;var Kn=An,Rn=[{path:"/",name:"Home",component:H},{path:"/search",name:"Search",component:qt},{path:"/cart",name:"Cart",component:Mt},{path:"/cart/success",name:"Success",component:Kn},{path:"/cart/checkout",name:"Checkout",component:Tn,meta:{requireLogin:!0}},{path:"/sign-up",name:"SignUp",component:ie},{path:"/log-in",name:"LogIn",component:_e},{path:"/my-account",name:"MyAccount",component:De,meta:{requireLogin:!0}},{path:"/:category_slug/:flower_slug/",name:"FLower",component:lt},{path:"/:category_slug/",name:"Category",component:jt}],Bn=Object(S["a"])({history:Object(S["b"])("/"),routes:Rn});Bn.beforeEach((function(t,e,n){t.matched.some((function(t){return t.meta.requireLogin}))&&!C.state.isAuthenticated?n({name:"LogIn",query:{to:t.path}}):n()}));var Mn=Bn;x.a.defaults.baseURL="https://keskiltd.com:443",Object(r["c"])(F).use(C).use(Mn,x.a).mount("#app")},a35a:function(t,e,n){"use strict";n("1c8d")},c7a3:function(t,e,n){"use strict";n("fc4c")},fc4c:function(t,e,n){}});
//# sourceMappingURL=app.4866b2d6.js.map